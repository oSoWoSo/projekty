name: Create sync.yml
on:
  push:
    branches:
      - main
      - master
  workflow_dispatch:
jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@main

      - name: DistroHopper
        run: |
          # Fill this variables
          sync=dh
          # If Destination repo name differ from what we have
          syncD=DistroHopper
          branch=all
          # Rest is same for most jobs. just copy into new one
          owner=osowoso
          SYNC=$(ls ${sync}/)
          echo "$SYNC"
          echo 'group:' > .github/sync.yml
          echo '  - files:' >> .github/sync.yml
          for item in $SYNC; do
            echo "    - source: ${sync}/${item}" >> .github/sync.yml
            echo "      dest: $item" >> .github/sync.yml
          done
          echo '    repos: |' >> .github/sync.yml
          # Here use sync or syncD variable
          echo "      ${owner}/${syncD}@${branch}" >> .github/sync.yml

      - name: Distro SVG
        run: |
          # Fill this two variables
          sync=distro-svg
          branch=main
          # Rest is same for most jobs. just copy into new one
          owner=osowoso
          SYNC=$(ls ${sync}/)
          echo "$SYNC"
          echo 'group:' > .github/sync.yml
          echo '  - files:' >> .github/sync.yml
          for item in $SYNC; do
            echo "    - source: ${sync}/${item}" >> .github/sync.yml
            echo "      dest: $item" >> .github/sync.yml
          done
          echo '    repos: |' >> .github/sync.yml
          echo "      ${owner}/${sync}@${branch}" >> .github/sync.yml

      - name: oSoWoSo Site and GitHub profile
        run: |
          # Fill this two variables
          sync=github
          # Repo name differ (We can't use real .github name)
          syncD=.github
          branch=main
          # Rest is same for most jobs. just copy into new one
          owner=osowoso
          SYNC=$(ls ${sync}/)
          echo "$SYNC"
          echo 'group:' > .github/sync.yml
          echo '  - files:' >> .github/sync.yml
          for item in $SYNC; do
            echo "    - source: ${sync}/${item}" >> .github/sync.yml
            echo "      dest: $item" >> .github/sync.yml
          done
          echo '    repos: |' >> .github/sync.yml
          echo "      ${owner}/${syncD}@${branch}" >> .github/sync.yml

      - name: Gumak
        run: |
          # Fill this two variables
          sync=gumak
          branch=main
          # Rest is same for most jobs. just copy into new one
          owner=osowoso
          SYNC=$(ls ${sync}/)
          echo "$SYNC"
          echo 'group:' > .github/sync.yml
          echo '  - files:' >> .github/sync.yml
          for item in $SYNC; do
            echo "    - source: ${sync}/${item}" >> .github/sync.yml
            echo "      dest: $item" >> .github/sync.yml
          done
          echo '    repos: |' >> .github/sync.yml
          echo "      ${owner}/${sync}@${branch}" >> .github/sync.yml

      - name: Quickemu
        run: |
          # Fill this two variables
          sync=quickemu
          branch=master-patched
          # Rest is same for most jobs. just copy into new one
          owner=osowoso
          SYNC=$(ls ${sync}/)
          echo "$SYNC"
          echo 'group:' > .github/sync.yml
          echo '  - files:' >> .github/sync.yml
          for item in $SYNC; do
            echo "    - source: ${sync}/${item}" >> .github/sync.yml
            echo "      dest: $item" >> .github/sync.yml
          done
          echo '    repos: |' >> .github/sync.yml
          echo "      ${owner}/${sync}@${branch}" >> .github/sync.yml

      - name: vbm
        run: |
          # Fill this two variables
          sync=vbm
          branch=vbm
          # Rest is same for most jobs. just copy into new one
          owner=osowoso
          SYNC=$(ls ${sync}/)
          echo "$SYNC"
          echo 'group:' > .github/sync.yml
          echo '  - files:' >> .github/sync.yml
          for item in $SYNC; do
            echo "    - source: ${sync}/${item}" >> .github/sync.yml
            echo "      dest: $item" >> .github/sync.yml
          done
          echo '    repos: |' >> .github/sync.yml
          echo "      ${owner}/${sync}@${branch}" >> .github/sync.yml

      - name: Void Helper (post-installation script)
        run: |
          # Fill this two variables
          sync=void-helper
          branch=
          # Rest is same for most jobs. just copy into new one
          owner=osowoso
          SYNC=$(ls ${sync}/)
          echo "$SYNC"
          echo 'group:' > .github/sync.yml
          echo '  - files:' >> .github/sync.yml
          for item in $SYNC; do
            echo "    - source: ${sync}/${item}" >> .github/sync.yml
            echo "      dest: $item" >> .github/sync.yml
          done
          echo '    repos: |' >> .github/sync.yml
          echo "      ${owner}/${sync}@${branch}" >> .github/sync.yml

      - name: Void Wallpapers
        run: |
          # Fill this two variables
          sync=wallpapers
          syncD=Void-Wallpapers
          branch=main
          # Rest is same for most jobs. just copy into new one
          owner=osowoso
          SYNC=$(ls ${sync}/)
          echo "$SYNC"
          echo 'group:' > .github/sync.yml
          echo '  - files:' >> .github/sync.yml
          for item in $SYNC; do
            echo "    - source: ${sync}/${item}" >> .github/sync.yml
            echo "      dest: $item" >> .github/sync.yml
          done
          echo '    repos: |' >> .github/sync.yml
          echo "      ${owner}/${sync}@${branch}" >> .github/sync.yml

      - name: push
        run: |
          git config --global user.name web-flow
          git config --global user.email "noreply@github.com"
          git add .github/sync.yml
          git commit -m "Create sync.yml"
          git push
          cat .github/sync.yml >> $GITHUB_STEP_SUMMARY
